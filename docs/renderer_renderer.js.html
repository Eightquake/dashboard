

<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>JSDoc: renderer/renderer.js</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Muli:100,400,700|Oswald:300|Inconsolata,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
    <link type="text/css" rel="stylesheet" href="styles/app.min.css">
</head>

<body>
    <div id="stickyNavbarOverlay"></div>
    <div class="top-navbar">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    
                     
                        <h1 class="navbar-item">Electron Dashboard by Victor Davidsson</h1>
                    
                    <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                 
                <div class="navbar-menu">
                    <div class="navbar-end">
                    
                        <div class="navbar-item">
                            <a href="https://github.com/Eightquake/dashboard" target="_blank">Github</a>
                        </div>
                    
                    </div>
                </div>
                
            </nav>
        </div>
    </div>
    <div class="container">
        <div class="columns">
            <div class="column is-3" id="sidebarNav">
                <div class="sidebar">
                    <nav>
                        <h2><a href="index.html">Home</a></h2><div class="category"></div><div class="category"><h2>Main</h2><h3>Modules</h3><ul><li><a href="module-main.html">main</a></li></ul></div><div class="category"><h2>Renderer</h2><h3>Modules</h3><ul><li><a href="module-fillGrid.html">fillGrid</a></li><li><a href="module-initGrid.html">initGrid</a></li><li><a href="module-problemHandler.html">problemHandler</a></li><li><a href="module-registerdetails.html">registerdetails</a></li><li><a href="module-registerplugins.html">registerplugins</a></li><li><a href="module-renderer.html">renderer</a></li><li><a href="module-settings.html">settings</a></li></ul><h3>Events</h3><ul><li><a href="module-problemHandler.html#~event:error">error</a></li><li><a href="module-problemHandler.html#~event:info">info</a></li><li><a href="module-problemHandler.html#~event:warn">warn</a></li></ul><h3>Global</h3><ul><li><a href="global.html#__basedir">__basedir</a></li><li><a href="global.html#problem">problem</a></li><li><a href="global.html#schedule">schedule</a></li></ul></div>
                    </nav>
                </div>
            </div>
            <div class="column is-9-desktop">
                <div class="content" id="main-content-wrapper">
                    <header class="page-title">
                        <p>Source</p>
                        <h1>renderer/renderer.js</h1>
                    </header>
                    
                    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* eslint-disable no-undef */
/**
  * The renderer process. It registers some global variables and on document load it starts the chain of functions that is needed to make the app work.
  * @category Renderer
  * @module renderer
  * @author Victor Davidsson
  *
  */

let path = require('path');
/**
  * __basedir is a global that points to the base directory of the project.
  * @category Renderer
  * @global
  */
__basedir = path.resolve(__dirname, "..", "..");

/* Init the theme before doing anything else */
(function() {
  /* Fetch the theme-choice if available, otherwise default to light */
  let themeChoice = localStorage.getItem("settings-theme") || "light";
  /* Create a new link element, add the correct attributes to it and add it to the head of the document */
  let link = document.createElement('link');
  link.setAttribute('rel', 'stylesheet');
  link.setAttribute('type', 'text/css');
  /* The theme files are called darktheme.css and lighttheme.css and are in the same folder as the index.html-file */
  link.setAttribute('href', themeChoice + "theme.css");
  /* Set the classname to something so the code can easily update this when needed, using selector link.theme-choice */
  link.className = "theme-choice";
  document.head.appendChild(link);
})();

/**
  * Scheduler module, works great and handles all of the scheduling. When a plugin needs to schedule something it should use this.
  * @see {@link https://github.com/node-schedule} on how to use it.
  * @category Renderer
  * @global
  */
global.schedule = require('node-schedule');

/**
  * Error handler script, that any code can emit an event on. When an event error, warn, or info is emitted a popup will be shown to the user.
  * All scripts should use this to communicate with the user, instead of using the console or similar.
  * @see {@link module:problemHandler} for more information.
  * @category Renderer
  * @global
  */
global.problem = require(__basedir + "/scripts/renderer/problemHandler.js");

/*
  * My plan was for every plugin having to use this settings as a way to save their settings, and then removing the access to localStorage.
  * This would prevent plugins being able to snoop on eachother and stuff like that, but it's not implemented yet and I don't know when I will fix it.
  * During my commits this variable might change from global to local back and forth.
  */
let settings = require(__basedir + "/scripts/renderer/settings.js");

/**
  * Code that is used to initialize everything about the grid. fillGrid creates all of the needed elements in the grid and initGrid starts Packery and everything else needed for Packery to work
  */
const fillGrid = require(__basedir + "/scripts/renderer/fillGrid.js");
const initGrid = require(__basedir + "/scripts/renderer/initGrid.js");

/**
  * Plugins are the code that handles strings and does whatever it is supposed to do with it. Plugins will have it's code run over and over.
  * Details register a string or similar to a plugin. A modules code will only be run once.
  */
const registerdetails = require(__basedir + "/scripts/renderer/registerdetails.js");
const registerplugins = require(__basedir + "/scripts/renderer/registerplugins.js");

/**
  * On window.onload event we know that the grid is fully ready to be filled and to be made into a Packery grid. onready.js takes care of that.
  * But first, we need to create the Maps for the loaded details and plugins. I guess these could be block-level variables instead of module-level but no harm in either.
  */
let loaded_details = new Map();
let loaded_plugins = new Map();
let created_plugins = [];
window.onload = function() {
  /* Both registerdetails and registerplugins start by returning a promise, then running their code */
  const detailsPromise = registerdetails(loaded_details);
  const pluginsPromise = registerplugins(loaded_plugins);

  /* When both promises are resolved, meaning both have finished running their code we can start running all the other code that depends on the details and plugins */
  Promise.all([detailsPromise, pluginsPromise]).then(function() {
    settings.init()
      .then(fillGrid(loaded_details, loaded_plugins, created_plugins)
      .then(initGrid()));
  });
}
</code></pre>
        </article>
    </section>




                </div>
            </div>
        </div>
    </div>

<footer class="footer">
    <div class="content has-text-centered">
        <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Tue Jul 30 2019 14:41:12 GMT+0200 (Central European Summer Time)</p>
        <p class="sidebar-created-by">
            <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
            <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers</a>
        </p>
    </div>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/app.min.js"></script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
