<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: scripts/renderer/problemHandler.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: scripts/renderer/problemHandler.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
  * Exports an EventEmitter so that other modules can emit an event on it that is handled here. The events are types of problems: warning, error and similar and when an event is emitted the function createPopup creates a popup for the user to see
  * This script could hook into the console functions for logging and warning, but I want to discourage the use of console to communicate with the user so I won't do that
  * @module problemHandler
  * @author Victor Davidsson
  *
  */

/* The EventEmitter is the only thing exported as of now, and when another module emits a event on it the handlers here handle it */
const EventEmitter = require('events');
let problemHandler = new EventEmitter();

/* Object to "translate" the event name to a icon */
let icons = {"error": "fa-exclamation-triangle", "warn": "fa-exclamation-circle", "info": "fa-exclamation"};

function createPopup(code, problem, string) {
  let popupList = document.querySelector(".problem-popup");

  let popup = document.createElement("li");
  popup.innerHTML = `&lt;h3>&lt;i class='fas ${icons[code]} popup-icon'>&lt;/i>${problem}:&lt;/h3>&lt;p>${string}&lt;/p>`;
  popup.classList.add(`problem-${code}`, "problem-animation-run");

  let exit = document.createElement("i");
  exit.classList.add("fas", "fa-times", "popup-exit");
  exit.onclick = function() {
    popupList.removeChild(popup);
  }

  popup.appendChild(exit);
  popupList.appendChild(popup);
}

process.on("uncaughtException", (err) => {
  // An Uncaught Exception is not good, let's inform the user something happened, as it wasn't handled anywhere else say that it's serious if it happens multiple times
  createPopup("error", "Critical Error", err);
});

/**
  * Error event, when this is emitted on the {@link global#problem} EventEmitter it will create a red popup with a critical-warning symbol
  * @event error
  */
problemHandler.on("error", (errorString) => {
  createPopup("error", "Error", errorString);
});

/**
  * Warning event, when this is emitted on the {@link global#problem} EventEmitter it will create a yellow popup with a warning symbol
  * @event warning
  */
problemHandler.on("warn", (warnString) => {
  createPopup("warn", "Warning", warnString);
});

/**
  * Information event, when this is emitted on the {@link global#problem} EventEmitter it  will create a grey popup with a exclamation point as a symbol
  * @event info
  */
problemHandler.on("info", (infoString) => {
  createPopup("info", "Note", infoString);
});


module.exports = problemHandler;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-fillGrid.html">fillGrid</a></li><li><a href="module-initGrid.html">initGrid</a></li><li><a href="module-main.html">main</a></li><li><a href="module-plugin-time.html">plugin-time</a></li><li><a href="module-problemHandler.html">problemHandler</a></li><li><a href="module-registerdetails.html">registerdetails</a></li><li><a href="module-registerplugins.html">registerplugins</a></li><li><a href="module-renderer.html">renderer</a></li><li><a href="module-settings.html">settings</a></li></ul><h3>Events</h3><ul><li><a href="module-problemHandler.html#~event:error">error</a></li><li><a href="module-problemHandler.html#~event:info">info</a></li><li><a href="module-problemHandler.html#~event:warning">warning</a></li></ul><h3>Global</h3><ul><li><a href="global.html#problem">problem</a></li><li><a href="global.html#schedule">schedule</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Fri Jul 19 2019 13:41:40 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
